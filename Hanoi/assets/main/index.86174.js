System.register("chunks:///_virtual/block.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./common.ts"],(function(o){"use strict";var t,i,e,n,s,r,h,c,a,l,u,d,p,f,v;return{setters:[function(o){t=o.applyDecoratedDescriptor,i=o.inheritsLoose,e=o.defineProperty,n=o.assertThisInitialized,s=o.initializerDefineProperty},function(o){r=o.cclegacy,h=o._decorator,c=o.SpriteAtlas,a=o.Sprite,l=o.v3,u=o.Component},function(o){d=o.ifBigToSmall,p=o.copy,f=o.Props,v=o.BASE_STORE}],execute:function(){var E,P,T,g,b;r._RF.push({},"5a89aYUkR9NobIu0S/+NBhk","block",void 0);var S=h.ccclass,y=h.property;o("Block",(E=S("Block"),P=y(c),E((b=t((g=function(o){function t(){for(var t,i=arguments.length,r=new Array(i),h=0;h<i;h++)r[h]=arguments[h];return t=o.call.apply(o,[this].concat(r))||this,e(n(t),"moveable",!1),s(n(t),"colorAtlas",b,n(t)),e(n(t),"originPos",null),e(n(t),"originBase","NONE"),t}i(t,o);var r=t.prototype;return r.onLoad=function(){this.node.on("touch-start",this.onTouchStart,this),this.node.on("touch-move",this.onTouchMove,this),this.node.on("touch-end",this.onTouchEnd,this)},r.onDestroy=function(){this.node.off("touch-start",this.onTouchStart,this),this.node.off("touch-move",this.onTouchMove,this),this.node.off("touch-end",this.onTouchEnd,this)},r.init=function(o,t){this.blockIndex=o,this.node.getComponent(a).spriteFrame=this.colorAtlas.getSpriteFrame(o+""),this.node.width=50+15*o},r.onTouchStart=function(o){this.moveable=!0,this.originPos=this.node.getPosition();var t=window.Global.baseIndexCheck(this.node.position,this.blockIndex,"START");"NONE"!==t?(this.originBase=t,this.updateArr(t,"POP")):this.moveable=!1},r.onTouchMove=function(o){if(this.moveable){var t=o.getDelta(),i=this.node.getPosition();this.node.setPosition(this.moveBy(i,t))}},r.onTouchEnd=function(o){if(console.log("end"),this.moveable){var t=window.Global.baseIndexCheck(this.node.position,this.blockIndex,"END");this.placeBlock(t);var i=d();console.log(i)}},r.placeBlock=function(o){if("NONE"===o)this.node.setPosition(this.originPos),this.updateArr(this.originBase,"PUSH");else if("LEFT"===o){var t=p(this.originPos);t.x=-300,t.y=f.BASE_LINE+f.BLOCK_HEIGHT*v.LEFT.length,this.node.setPosition(t),this.updateArr("LEFT","PUSH")}else if("CENTER"===o){var i=p(this.originPos);i.x=0,i.y=f.BASE_LINE+f.BLOCK_HEIGHT*v.CENTER.length,this.node.setPosition(i),this.updateArr("CENTER","PUSH")}else if("RIGHT"===o){var e=p(this.originPos);e.y=f.BASE_LINE+f.BLOCK_HEIGHT*v.RIGHT.length,e.x=300,this.node.setPosition(e),this.updateArr("RIGHT","PUSH")}},r.moveBy=function(o,t){return l(o.x+t.x,o.y+t.y,o.z+t.z)},r.updateArr=function(o,t){"POP"===t?v[o].pop():"PUSH"===t&&v[o].push(this.blockIndex)},t}(u)).prototype,"colorAtlas",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=g))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./common.ts"],(function(e){"use strict";var t,n,i,r,a,o,l,c,s,b,u,E,N,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,c=e.Prefab,s=e.instantiate,b=e.v3,u=e.Component},function(e){E=e.BASE_STORE,N=e.Props,p=e.ifBigger}],execute:function(){var f,h,T,d,g,R,y,L,C,I,k,m,v;a._RF.push({},"a9a38PHnnNAfad4/crSYHna","game",void 0);var H=o.ccclass,F=o.property;e("InitTs",(f=H("InitTs"),h=F(l),T=F(l),d=F(l),g=F(l),R=F(c),f((C=t((L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(r(t),"baseNodeL",C,r(t)),i(r(t),"baseNodeC",I,r(t)),i(r(t),"baseNodeR",k,r(t)),i(r(t),"blockLayer",m,r(t)),i(r(t),"blockPrefab",v,r(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){window.Global={baseIndexCheck:this.baseIndexCheck}},a.start=function(){this.initBlock(6)},a.initBlock=function(e){E.LEFT=[],E.CENTER=[],E.RIGHT=[];for(var t=e-1;t>=0;t--){var n=s(this.blockPrefab);n.setPosition(b(-300,N.BASE_LINE+N.BLOCK_HEIGHT*(e-1-t),0)),n.getComponent("Block").init(t,e),this.blockLayer.addChild(n),E.LEFT.push(t)}},a.baseIndexCheck=function(e,t,n){var i=E.LEFT.length?E.LEFT[E.LEFT.length-1]:-1,r=E.CENTER.length?E.CENTER[E.CENTER.length-1]:-1,a=E.RIGHT.length?E.RIGHT[E.RIGHT.length-1]:-1;if("START"===n&&t!==i&&t!==r&&t!==a)return"NONE";if(Math.abs(e.y)>166)return"NONE";var o=Math.abs(e.x+300),l=Math.abs(e.x),c=Math.abs(e.x-300);return o<80?"END"===n?p(t,i)?"LEFT":"NONE":"LEFT":l<80?"END"===n?p(t,r)?"CENTER":"NONE":"CENTER":c<80?"END"===n?p(t,a)?"RIGHT":"NONE":"RIGHT":"NONE"},t}(u)).prototype,"baseNodeL",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(L.prototype,"baseNodeC",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(L.prototype,"baseNodeR",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(L.prototype,"blockLayer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(L.prototype,"blockPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=L))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/common.ts",["cc"],(function(n){"use strict";var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"ed10bKJxJdDEJxP0sJTMXKH","common",void 0);n("Props",{BASE_LINE:-123,BLOCK_HEIGHT:40});var t=n("BASE_STORE",{LEFT:[],CENTER:[],RIGHT:[]});n("copy",(function(n){return JSON.parse(JSON.stringify(n))})),n("ifBigger",(function(n,r){return r<0||n<r})),n("ifBigToSmall",(function(){if(0!==t.LEFT.length||0!==t.CENTER.length)return!1;for(var n=t.RIGHT,r=0;r<n.length-1;r++)if(n[r]<n[r+1])return!1;return!0}));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./common.ts","./block.ts","./game.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});